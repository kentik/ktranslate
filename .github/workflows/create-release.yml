on:
  release:
    types: [edited, created]

name: Upload Release

jobs:
  build:
    runs-on: ubuntu-latest
    continue-on-error: true
    strategy:
      matrix:
        include:
          - distro: centos
            release: 7
            pkg: rpm
            pkg_name: el
          - distro: centos
            release: 8
            pkg: rpm
            pkg_name: el

          - distro: ubuntu
            release: focal
            pkg: deb
            pkg_name: ubuntu
          - distro: ubuntu
            release: jammy
            pkg: deb
            pkg_name: ubuntu
          - distro: ubuntu
            release: kinetic
            pkg: deb
            pkg_name: ubuntu

          - distro: debian
            release: bullseye
            pkg: deb
            pkg_name: debian

    container:
      image: ${{ matrix.distro }}:${{ matrix.release }}

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set Version
        run: |
           echo "KENTIK_KTRANSLATE_VERSION=${{ github.ref_name }}" >> $GITHUB_ENV
           echo ${{ env.KENTIK_KTRANSLATE_VERSION }}
           echo ${{ github.ref_name }}
